<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MyProject1: /home/stepsei/workspace/bind9/lib/lwres/lwres_noop.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MyProject1
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">--</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a1b4463e4b2f6ff4aff4dd4221cff45f.html">lwres</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lwres_noop.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;config.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;<a class="el" href="lwbuffer_8h_source.html">lwres/lwbuffer.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="lwpacket_8h_source.html">lwres/lwpacket.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="lwres_8h_source.html">lwres/lwres.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="lib_2lwres_2include_2lwres_2result_8h_source.html">lwres/result.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="context__p_8h_source.html">context_p.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="assert__p_8h_source.html">assert_p.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab245821f533197ab3db6dde16347fa3d"><td class="memItemLeft" align="right" valign="top">lwres_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lwres__noop_8c.html#ab245821f533197ab3db6dde16347fa3d">lwres_nooprequest_render</a> (<a class="el" href="lwres_2include_2lwres_2context_8h.html#ac0064a3257c32d400747227537a11cd0">lwres_context_t</a> *ctx, <a class="el" href="structlwres__nooprequest__t.html">lwres_nooprequest_t</a> *req, <a class="el" href="structlwres__lwpacket.html">lwres_lwpacket_t</a> *pkt, <a class="el" href="lwbuffer_8h.html#ae901fe1c7f37ff8893383c66e8200d4c">lwres_buffer_t</a> *b)</td></tr>
<tr class="separator:ab245821f533197ab3db6dde16347fa3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f3fdccaad417b2af76aadd5d2dbe7b9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7f3fdccaad417b2af76aadd5d2dbe7b9"></a>
lwres_result_t&#160;</td><td class="memItemRight" valign="bottom"><b>lwres_noopresponse_render</b> (<a class="el" href="lwres_2include_2lwres_2context_8h.html#ac0064a3257c32d400747227537a11cd0">lwres_context_t</a> *ctx, <a class="el" href="structlwres__noopresponse__t.html">lwres_noopresponse_t</a> *req, <a class="el" href="structlwres__lwpacket.html">lwres_lwpacket_t</a> *pkt, <a class="el" href="lwbuffer_8h.html#ae901fe1c7f37ff8893383c66e8200d4c">lwres_buffer_t</a> *b)</td></tr>
<tr class="separator:a7f3fdccaad417b2af76aadd5d2dbe7b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a14b8ff11f34a9cf5586e8a48256f4b"><td class="memItemLeft" align="right" valign="top">lwres_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lwres__noop_8c.html#a1a14b8ff11f34a9cf5586e8a48256f4b">lwres_nooprequest_parse</a> (<a class="el" href="lwres_2include_2lwres_2context_8h.html#ac0064a3257c32d400747227537a11cd0">lwres_context_t</a> *ctx, <a class="el" href="lwbuffer_8h.html#ae901fe1c7f37ff8893383c66e8200d4c">lwres_buffer_t</a> *b, <a class="el" href="structlwres__lwpacket.html">lwres_lwpacket_t</a> *pkt, <a class="el" href="structlwres__nooprequest__t.html">lwres_nooprequest_t</a> **structp)</td></tr>
<tr class="separator:a1a14b8ff11f34a9cf5586e8a48256f4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60685402ab488322fd13d31e7845f0bf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a60685402ab488322fd13d31e7845f0bf"></a>
lwres_result_t&#160;</td><td class="memItemRight" valign="bottom"><b>lwres_noopresponse_parse</b> (<a class="el" href="lwres_2include_2lwres_2context_8h.html#ac0064a3257c32d400747227537a11cd0">lwres_context_t</a> *ctx, <a class="el" href="lwbuffer_8h.html#ae901fe1c7f37ff8893383c66e8200d4c">lwres_buffer_t</a> *b, <a class="el" href="structlwres__lwpacket.html">lwres_lwpacket_t</a> *pkt, <a class="el" href="structlwres__noopresponse__t.html">lwres_noopresponse_t</a> **structp)</td></tr>
<tr class="separator:a60685402ab488322fd13d31e7845f0bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47100b83ed06bfc4b7610b6c8dc2b19c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lwres__noop_8c.html#a47100b83ed06bfc4b7610b6c8dc2b19c">lwres_noopresponse_free</a> (<a class="el" href="lwres_2include_2lwres_2context_8h.html#ac0064a3257c32d400747227537a11cd0">lwres_context_t</a> *ctx, <a class="el" href="structlwres__noopresponse__t.html">lwres_noopresponse_t</a> **structp)</td></tr>
<tr class="separator:a47100b83ed06bfc4b7610b6c8dc2b19c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec729395417c9c796c840830d70d858f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec729395417c9c796c840830d70d858f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>lwres_nooprequest_free</b> (<a class="el" href="lwres_2include_2lwres_2context_8h.html#ac0064a3257c32d400747227537a11cd0">lwres_context_t</a> *ctx, <a class="el" href="structlwres__nooprequest__t.html">lwres_nooprequest_t</a> **structp)</td></tr>
<tr class="separator:aec729395417c9c796c840830d70d858f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a1a14b8ff11f34a9cf5586e8a48256f4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lwres_result_t lwres_nooprequest_parse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lwres_2include_2lwres_2context_8h.html#ac0064a3257c32d400747227537a11cd0">lwres_context_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lwbuffer_8h.html#ae901fe1c7f37ff8893383c66e8200d4c">lwres_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlwres__lwpacket.html">lwres_lwpacket_t</a> *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlwres__nooprequest__t.html">lwres_nooprequest_t</a> **&#160;</td>
          <td class="paramname"><em>structp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parse a noop request. Note that to get here, the lwpacket must have already been parsed and removed by the caller, otherwise it would be pretty hard for it to know this is the right function to call.</p>
<p>The function verifies bits of the header, but does not modify it. </p>

</div>
</div>
<a class="anchor" id="ab245821f533197ab3db6dde16347fa3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lwres_result_t lwres_nooprequest_render </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lwres_2include_2lwres_2context_8h.html#ac0064a3257c32d400747227537a11cd0">lwres_context_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlwres__nooprequest__t.html">lwres_nooprequest_t</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlwres__lwpacket.html">lwres_lwpacket_t</a> *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lwbuffer_8h.html#ae901fe1c7f37ff8893383c66e8200d4c">lwres_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>These are low-level routines for creating and parsing lightweight resolver no-op request and response messages.</p>
<p>The no-op message is analogous to a ping packet: a packet is sent to the resolver daemon and is simply echoed back. The opcode is intended to allow a client to determine if the server is operational or not.</p>
<p>There are four main functions for the no-op opcode. One render function converts a no-op request structure &ndash; <a class="el" href="structlwres__nooprequest__t.html">lwres_nooprequest_t</a> &ndash; to the lighweight resolver's canonical format. It is complemented by a parse function that converts a packet in this canonical format to a no-op request structure. Another render function converts the no-op response structure &ndash; <a class="el" href="structlwres__noopresponse__t.html">lwres_noopresponse_t</a> to the canonical format. This is complemented by a parse function which converts a packet in canonical format to a no-op response structure.</p>
<p>These structures are defined in <a class="el" href="lwres_8h.html">&lt;lwres/lwres.h.&gt; </a> They are shown below.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#define LWRES_OPCODE_NOOP       0x00000000U</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;typedef struct {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        lwres_uint16_t  datalength;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        unsigned char   *data;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;} lwres_nooprequest_t;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;typedef struct {</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        lwres_uint16_t  datalength;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        unsigned char   *data;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;} lwres_noopresponse_t;</div></div><!-- fragment --><p>Although the structures have different types, they are identical. This is because the no-op opcode simply echos whatever data was sent: the response is therefore identical to the request.</p>
<p><a class="el" href="lwres__noop_8c.html#ab245821f533197ab3db6dde16347fa3d">lwres_nooprequest_render()</a> uses resolver context ctx to convert no-op request structure req to canonical format. The packet header structure pkt is initialised and transferred to buffer b. The contents of *req are then appended to the buffer in canonical format. lwres_noopresponse_render() performs the same task, except it converts a no-op response structure <a class="el" href="structlwres__noopresponse__t.html">lwres_noopresponse_t</a> to the lightweight resolver's canonical format.</p>
<p><a class="el" href="lwres__noop_8c.html#a1a14b8ff11f34a9cf5586e8a48256f4b">lwres_nooprequest_parse()</a> uses context ctx to convert the contents of packet pkt to a <a class="el" href="structlwres__nooprequest__t.html">lwres_nooprequest_t</a> structure. Buffer b provides space to be used for storing this structure. When the function succeeds, the resulting <a class="el" href="structlwres__nooprequest__t.html">lwres_nooprequest_t</a> is made available through *structp. lwres_noopresponse_parse() offers the same semantics as <a class="el" href="lwres__noop_8c.html#a1a14b8ff11f34a9cf5586e8a48256f4b">lwres_nooprequest_parse()</a> except it yields a <a class="el" href="structlwres__noopresponse__t.html">lwres_noopresponse_t</a> structure.</p>
<p><a class="el" href="lwres__noop_8c.html#a47100b83ed06bfc4b7610b6c8dc2b19c">lwres_noopresponse_free()</a> and lwres_nooprequest_free() release the memory in resolver context ctx that was allocated to the <a class="el" href="structlwres__noopresponse__t.html">lwres_noopresponse_t</a> or <a class="el" href="structlwres__nooprequest__t.html">lwres_nooprequest_t</a> structures referenced via structp.</p>
<h1><a class="anchor" id="lwres_noop_return"></a>
Return Values</h1>
<p>The no-op opcode functions <a class="el" href="lwres__noop_8c.html#ab245821f533197ab3db6dde16347fa3d">lwres_nooprequest_render()</a>, lwres_noopresponse_render() <a class="el" href="lwres__noop_8c.html#a1a14b8ff11f34a9cf5586e8a48256f4b">lwres_nooprequest_parse()</a> and lwres_noopresponse_parse() all return #LWRES_R_SUCCESS on success. They return #LWRES_R_NOMEMORY if memory allocation fails. #LWRES_R_UNEXPECTEDEND is returned if the available space in the buffer b is too small to accommodate the packet header or the <a class="el" href="structlwres__nooprequest__t.html">lwres_nooprequest_t</a> and <a class="el" href="structlwres__noopresponse__t.html">lwres_noopresponse_t</a> structures. <a class="el" href="lwres__noop_8c.html#a1a14b8ff11f34a9cf5586e8a48256f4b">lwres_nooprequest_parse()</a> and lwres_noopresponse_parse() will return #LWRES_R_UNEXPECTEDEND if the buffer is not empty after decoding the received packet. These functions will return #LWRES_R_FAILURE if pktflags in the packet header structure #lwres_lwpacket_t indicate that the packet is not a response to an earlier query.</p>
<h1><a class="anchor" id="lwres_noop_see"></a>
See Also</h1>
<p><a class="el" href="lwpacket_8c.html">lwpacket.c</a> </p>

</div>
</div>
<a class="anchor" id="a47100b83ed06bfc4b7610b6c8dc2b19c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lwres_noopresponse_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lwres_2include_2lwres_2context_8h.html#ac0064a3257c32d400747227537a11cd0">lwres_context_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlwres__noopresponse__t.html">lwres_noopresponse_t</a> **&#160;</td>
          <td class="paramname"><em>structp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees any dynamically allocated memory for this structure.</p>
<p>Requires:</p>
<p>ctx != NULL, and be a context returned via <a class="el" href="lwres_2include_2lwres_2context_8h.html#a76ddc0e93d9b320a9bbc44b67fa29420">lwres_context_create()</a>.</p>
<p>structp != NULL &amp;&amp; *structp != NULL.</p>
<p>Ensures:</p>
<p>*structp == NULL.</p>
<p>All memory allocated by this structure will be returned to the system via the context's free function. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
