<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MyProject1: /home/stepsei/workspace/bind9/lib/isc/include/isc/entropy.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MyProject1
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">--</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_8f8d5a2a8fb3d53bd9c29794bc65232d.html">isc</a></li><li class="navelem"><a class="el" href="dir_280f2bbac39866abe61ba42fd94618f9.html">include</a></li><li class="navelem"><a class="el" href="dir_c2629041933f55ea008057abdba90943.html">isc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">entropy.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The entropy API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="stdio_8h_source.html">stdio.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="isc_2include_2isc_2lang_8h_source.html">isc/lang.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="lib_2isc_2include_2isc_2types_8h_source.html">isc/types.h</a>&gt;</code><br />
</div>
<p><a href="entropy_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a88a74c7a0affdc7de6bd309b663ed2d9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88a74c7a0affdc7de6bd309b663ed2d9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a88a74c7a0affdc7de6bd309b663ed2d9">ISC_ENTROPY_GOODONLY</a>&#160;&#160;&#160;0x00000001U</td></tr>
<tr class="memdesc:a88a74c7a0affdc7de6bd309b663ed2d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract only "good" data; return failure if there is not enough data available and there are no sources which we can poll to get data, or those sources are empty. <br /></td></tr>
<tr class="separator:a88a74c7a0affdc7de6bd309b663ed2d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad644da9f8a8bbbb00a9d884c86bc9035"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad644da9f8a8bbbb00a9d884c86bc9035"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#ad644da9f8a8bbbb00a9d884c86bc9035">ISC_ENTROPY_PARTIAL</a>&#160;&#160;&#160;0x00000002U</td></tr>
<tr class="memdesc:ad644da9f8a8bbbb00a9d884c86bc9035"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract as much good data as possible, but if there isn't enough at hand, return what is available. This flag only makes sense when used with _GOODONLY. <br /></td></tr>
<tr class="separator:ad644da9f8a8bbbb00a9d884c86bc9035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c71d9326794cf6c2db0d29db76912a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab5c71d9326794cf6c2db0d29db76912a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#ab5c71d9326794cf6c2db0d29db76912a">ISC_ENTROPY_BLOCKING</a>&#160;&#160;&#160;0x00000004U</td></tr>
<tr class="memdesc:ab5c71d9326794cf6c2db0d29db76912a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block the task until data is available. This is contrary to the ISC task system, where tasks should never block. However, if this is a special purpose application where blocking a task is acceptable (say, an offline zone signer) this flag may be set. This flag only makes sense when used with _GOODONLY, and will block regardless of the setting for _PARTIAL. <br /></td></tr>
<tr class="separator:ab5c71d9326794cf6c2db0d29db76912a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16da27d22efb2f80100b804db9d232e2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a16da27d22efb2f80100b804db9d232e2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a16da27d22efb2f80100b804db9d232e2">ISC_ENTROPYSOURCE_ESTIMATE</a>&#160;&#160;&#160;0x00000001U</td></tr>
<tr class="memdesc:a16da27d22efb2f80100b804db9d232e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate the amount of entropy contained in the sample pool. If this is not set, the source will be gathered and periodically mixed into the entropy pool, but no increment in contained entropy will be assumed. This flag only makes sense on sample sources. <br /></td></tr>
<tr class="separator:a16da27d22efb2f80100b804db9d232e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac714deedac6ba27edb996285d73fb61e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac714deedac6ba27edb996285d73fb61e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#ac714deedac6ba27edb996285d73fb61e">ISC_ENTROPY_KEYBOARDYES</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ac714deedac6ba27edb996285d73fb61e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the keyboard as the only entropy source. <br /></td></tr>
<tr class="separator:ac714deedac6ba27edb996285d73fb61e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48b8ca8f383520f8d0246d286c0574f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48b8ca8f383520f8d0246d286c0574f6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a48b8ca8f383520f8d0246d286c0574f6">ISC_ENTROPY_KEYBOARDNO</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a48b8ca8f383520f8d0246d286c0574f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Never use the keyboard as an entropy source. <br /></td></tr>
<tr class="separator:a48b8ca8f383520f8d0246d286c0574f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a5894542038010f94028a5b73a2b4a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a50a5894542038010f94028a5b73a2b4a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a50a5894542038010f94028a5b73a2b4a">ISC_ENTROPY_KEYBOARDMAYBE</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a50a5894542038010f94028a5b73a2b4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the keyboard as an entropy source only if opening the random device fails. <br /></td></tr>
<tr class="separator:a50a5894542038010f94028a5b73a2b4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a3402145791d50b9364baf02c7949cc88"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3402145791d50b9364baf02c7949cc88"></a>
typedef isc_result_t(*&#160;</td><td class="memItemRight" valign="bottom"><b>isc_entropystart_t</b>) (<a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> *source, void *arg, isc_boolean_t blocking)</td></tr>
<tr class="separator:a3402145791d50b9364baf02c7949cc88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96f6d5822cc511955d0ba346d7a5944a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96f6d5822cc511955d0ba346d7a5944a"></a>
typedef isc_result_t(*&#160;</td><td class="memItemRight" valign="bottom"><b>isc_entropyget_t</b>) (<a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> *source, void *arg, isc_boolean_t blocking)</td></tr>
<tr class="separator:a96f6d5822cc511955d0ba346d7a5944a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d3dc266a2db90dd61a77fa029f6df83"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0d3dc266a2db90dd61a77fa029f6df83"></a>
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><b>isc_entropystop_t</b>) (<a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> *source, void *arg)</td></tr>
<tr class="separator:a0d3dc266a2db90dd61a77fa029f6df83"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa2f35f91267f6a4f16312c02542a46e1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa2f35f91267f6a4f16312c02542a46e1"></a>
ISC_LANG_BEGINDECLS isc_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#aa2f35f91267f6a4f16312c02542a46e1">isc_entropy_create</a> (<a class="el" href="structisc__mem.html">isc_mem_t</a> *mctx, <a class="el" href="structisc__entropy.html">isc_entropy_t</a> **entp)</td></tr>
<tr class="memdesc:aa2f35f91267f6a4f16312c02542a46e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new entropy object. <br /></td></tr>
<tr class="separator:aa2f35f91267f6a4f16312c02542a46e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d3adf8fe291d28f37af29643f09a6a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a5d3adf8fe291d28f37af29643f09a6a0">isc_entropy_attach</a> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> *ent, <a class="el" href="structisc__entropy.html">isc_entropy_t</a> **entp)</td></tr>
<tr class="separator:a5d3adf8fe291d28f37af29643f09a6a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3c2114d6567dfb8fcedf254694574bf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3c2114d6567dfb8fcedf254694574bf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#ac3c2114d6567dfb8fcedf254694574bf">isc_entropy_detach</a> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> **entp)</td></tr>
<tr class="memdesc:ac3c2114d6567dfb8fcedf254694574bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detaches from an entropy object. <br /></td></tr>
<tr class="separator:ac3c2114d6567dfb8fcedf254694574bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48df8f5bb233d7afb1dd16775b4d60ed"><td class="memItemLeft" align="right" valign="top">isc_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a48df8f5bb233d7afb1dd16775b4d60ed">isc_entropy_createfilesource</a> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> *ent, const char *fname)</td></tr>
<tr class="memdesc:a48df8f5bb233d7afb1dd16775b4d60ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new entropy source from a file.  <a href="#a48df8f5bb233d7afb1dd16775b4d60ed">More...</a><br /></td></tr>
<tr class="separator:a48df8f5bb233d7afb1dd16775b4d60ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80c849dd3267563d654cc872d374f398"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a80c849dd3267563d654cc872d374f398"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a80c849dd3267563d654cc872d374f398">isc_entropy_destroysource</a> (<a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> **sourcep)</td></tr>
<tr class="memdesc:a80c849dd3267563d654cc872d374f398"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes an entropy source from the entropy system. <br /></td></tr>
<tr class="separator:a80c849dd3267563d654cc872d374f398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a161fd321ebfecef6f447fc6a06b074c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a161fd321ebfecef6f447fc6a06b074c1"></a>
isc_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a161fd321ebfecef6f447fc6a06b074c1">isc_entropy_createsamplesource</a> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> *ent, <a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> **sourcep)</td></tr>
<tr class="memdesc:a161fd321ebfecef6f447fc6a06b074c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an entropy source that consists of samples. Each sample is added to the source via isc_entropy_addsamples(), below. <br /></td></tr>
<tr class="separator:a161fd321ebfecef6f447fc6a06b074c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a9efa6989c72ad49bfea346cc3cd83d"><td class="memItemLeft" align="right" valign="top">isc_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a7a9efa6989c72ad49bfea346cc3cd83d">isc_entropy_createcallbacksource</a> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> *ent, isc_entropystart_t start, isc_entropyget_t get, isc_entropystop_t stop, void *arg, <a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> **sourcep)</td></tr>
<tr class="memdesc:a7a9efa6989c72ad49bfea346cc3cd83d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an entropy source that is polled via a callback.  <a href="#a7a9efa6989c72ad49bfea346cc3cd83d">More...</a><br /></td></tr>
<tr class="separator:a7a9efa6989c72ad49bfea346cc3cd83d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6083c86b094f3aa98b5dea4692d0913d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6083c86b094f3aa98b5dea4692d0913d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a6083c86b094f3aa98b5dea4692d0913d">isc_entropy_stopcallbacksources</a> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> *ent)</td></tr>
<tr class="memdesc:a6083c86b094f3aa98b5dea4692d0913d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the stop functions for callback sources that have had their start functions called. <br /></td></tr>
<tr class="separator:a6083c86b094f3aa98b5dea4692d0913d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bccb47156bd4c75b87e28d104b74296"><td class="memItemLeft" align="right" valign="top">isc_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a8bccb47156bd4c75b87e28d104b74296">isc_entropy_getdata</a> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> *ent, void *data, unsigned int length, unsigned int *returned, unsigned int flags)</td></tr>
<tr class="memdesc:a8bccb47156bd4c75b87e28d104b74296"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract data from the entropy pool. This may load the pool from various sources.  <a href="#a8bccb47156bd4c75b87e28d104b74296">More...</a><br /></td></tr>
<tr class="separator:a8bccb47156bd4c75b87e28d104b74296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7dd5c2d7515e70dc3675c33b7569c3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#ae7dd5c2d7515e70dc3675c33b7569c3a">isc_entropy_putdata</a> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> *ent, void *data, unsigned int length, isc_uint32_t entropy)</td></tr>
<tr class="memdesc:ae7dd5c2d7515e70dc3675c33b7569c3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add "length" bytes in "data" to the entropy pool, incrementing the pool's entropy count by "entropy.".  <a href="#ae7dd5c2d7515e70dc3675c33b7569c3a">More...</a><br /></td></tr>
<tr class="separator:ae7dd5c2d7515e70dc3675c33b7569c3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0df0621b79581db12a985d4154ee139c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0df0621b79581db12a985d4154ee139c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a0df0621b79581db12a985d4154ee139c">isc_entropy_stats</a> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> *ent, FILE *out)</td></tr>
<tr class="memdesc:a0df0621b79581db12a985d4154ee139c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump some (trivial) stats to the stdio stream "out". <br /></td></tr>
<tr class="separator:a0df0621b79581db12a985d4154ee139c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa45e3af68cce22a3920a22f21451cfc0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa45e3af68cce22a3920a22f21451cfc0"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>isc_entropy_status</b> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> *end)</td></tr>
<tr class="separator:aa45e3af68cce22a3920a22f21451cfc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a859e737a570bb80dbc3b6f3107f635d4"><td class="memItemLeft" align="right" valign="top">isc_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#a859e737a570bb80dbc3b6f3107f635d4">isc_entropy_usebestsource</a> (<a class="el" href="structisc__entropy.html">isc_entropy_t</a> *ectx, <a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> **source, const char *randomfile, int use_keyboard)</td></tr>
<tr class="memdesc:a859e737a570bb80dbc3b6f3107f635d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use whatever source of entropy is best.  <a href="#a859e737a570bb80dbc3b6f3107f635d4">More...</a><br /></td></tr>
<tr class="separator:a859e737a570bb80dbc3b6f3107f635d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a68d2fef99281b39544367df1972a8911"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a68d2fef99281b39544367df1972a8911"></a>
isc_result_t&#160;</td><td class="memItemRight" valign="bottom"><b>isc_entropy_addcallbacksample</b> (<a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> *source, isc_uint32_t sample, isc_uint32_t extra)</td></tr>
<tr class="separator:a68d2fef99281b39544367df1972a8911"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa145c7a29e7bc194870ae29550b1d613"><td class="memItemLeft" align="right" valign="top">isc_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entropy_8h.html#aa145c7a29e7bc194870ae29550b1d613">isc_entropy_addsample</a> (<a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> *source, isc_uint32_t sample, isc_uint32_t extra)</td></tr>
<tr class="memdesc:aa145c7a29e7bc194870ae29550b1d613"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a sample to the sample source.  <a href="#aa145c7a29e7bc194870ae29550b1d613">More...</a><br /></td></tr>
<tr class="separator:aa145c7a29e7bc194870ae29550b1d613"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The entropy API. </p>
<ul>
<li>MP: The entropy object is locked internally. All callbacks into application-provided functions (for setup, gathering, and shutdown of sources) are guaranteed to be called with the entropy API lock held. This means these functions are not permitted to call back into the entropy API.</li>
</ul>
<ul>
<li>Reliability: No anticipated impact.</li>
</ul>
<ul>
<li>Resources: A buffer, used as an entropy pool.</li>
</ul>
<ul>
<li>Security: While this code is believed to implement good entropy gathering and distribution, it has not been reviewed by a cryptographic expert. Since the added entropy is only as good as the sources used, this module could hand out bad data and never know it.</li>
</ul>
<ul>
<li>Standards: None. </li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa145c7a29e7bc194870ae29550b1d613"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">isc_result_t isc_entropy_addsample </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">isc_uint32_t&#160;</td>
          <td class="paramname"><em>sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">isc_uint32_t&#160;</td>
          <td class="paramname"><em>extra</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a sample to the sample source. </p>
<p>The sample MUST be a timestamp that increases over time, with the exception of wrap-around for extremely high resolution timers which will quickly wrap-around a 32-bit integer.</p>
<p>The "extra" parameter is used only to add a bit more unpredictable data. It is not used other than included in the hash of samples.</p>
<p>When in an entropy API callback function, _addcallbacksource() must be used. At all other times, _addsample() must be used. </p>

</div>
</div>
<a class="anchor" id="a5d3adf8fe291d28f37af29643f09a6a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void isc_entropy_attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structisc__entropy.html">isc_entropy_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structisc__entropy.html">isc_entropy_t</a> **&#160;</td>
          <td class="paramname"><em>entp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attaches to an entropy object. </p>

</div>
</div>
<a class="anchor" id="a7a9efa6989c72ad49bfea346cc3cd83d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">isc_result_t isc_entropy_createcallbacksource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structisc__entropy.html">isc_entropy_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">isc_entropystart_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">isc_entropyget_t&#160;</td>
          <td class="paramname"><em>get</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">isc_entropystop_t&#160;</td>
          <td class="paramname"><em>stop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> **&#160;</td>
          <td class="paramname"><em>sourcep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an entropy source that is polled via a callback. </p>
<p>This would be used when keyboard input is used, or a GUI input method. It can also be used to hook in any external entropy source.</p>
<p>Samples are added via isc_entropy_addcallbacksample(), below. _addcallbacksample() is the only function which may be called from within an entropy API callback function. </p>

</div>
</div>
<a class="anchor" id="a48df8f5bb233d7afb1dd16775b4d60ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">isc_result_t isc_entropy_createfilesource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structisc__entropy.html">isc_entropy_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new entropy source from a file. </p>
<p>The file is assumed to contain good randomness, and will be mixed directly into the pool with every byte adding 8 bits of entropy.</p>
<p>The file will be put into non-blocking mode, so it may be a device file, such as /dev/random. /dev/urandom should not be used here if it can be avoided, since it will always provide data even if it isn't good. We will make as much pseudorandom data as we need internally if our caller asks for it.</p>
<p>If we hit end-of-file, we will stop reading from this source. Callers who require strong random data will get failure when our pool drains. The file will never be opened/read again once EOF is reached. </p>

</div>
</div>
<a class="anchor" id="a8bccb47156bd4c75b87e28d104b74296"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">isc_result_t isc_entropy_getdata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structisc__entropy.html">isc_entropy_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>returned</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract data from the entropy pool. This may load the pool from various sources. </p>
<p>Do this by stiring the pool and returning a part of hash as randomness. Note that no secrets are given away here since parts of the hash are xored together before returned.</p>
<p>Honor the request from the caller to only return good data, any data, etc. </p>

</div>
</div>
<a class="anchor" id="ae7dd5c2d7515e70dc3675c33b7569c3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void isc_entropy_putdata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structisc__entropy.html">isc_entropy_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">isc_uint32_t&#160;</td>
          <td class="paramname"><em>entropy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add "length" bytes in "data" to the entropy pool, incrementing the pool's entropy count by "entropy.". </p>
<p>These bytes will prime the pseudorandom portion even if no entropy is actually added. </p>

</div>
</div>
<a class="anchor" id="a859e737a570bb80dbc3b6f3107f635d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">isc_result_t isc_entropy_usebestsource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structisc__entropy.html">isc_entropy_t</a> *&#160;</td>
          <td class="paramname"><em>ectx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structisc__entropysource.html">isc_entropysource_t</a> **&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>randomfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_keyboard</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use whatever source of entropy is best. </p>
<p>Notes: </p><ul>
<li>If "randomfile" is not NULL, open it with <a class="el" href="entropy_8h.html#a48df8f5bb233d7afb1dd16775b4d60ed" title="Create a new entropy source from a file. ">isc_entropy_createfilesource()</a>.</li>
</ul>
<ul>
<li>If "randomfile" is NULL and the system's random device was detected when the program was configured and built, open that device with <a class="el" href="entropy_8h.html#a48df8f5bb233d7afb1dd16775b4d60ed" title="Create a new entropy source from a file. ">isc_entropy_createfilesource()</a>.</li>
</ul>
<ul>
<li>If "use_keyboard" is <a class="el" href="entropy_8h.html#ac714deedac6ba27edb996285d73fb61e" title="Use the keyboard as the only entropy source. ">ISC_ENTROPY_KEYBOARDYES</a>, then always open the keyboard as an entropy source (possibly in addition to "randomfile" or the random device).</li>
</ul>
<ul>
<li>If "use_keyboard" is <a class="el" href="entropy_8h.html#a50a5894542038010f94028a5b73a2b4a" title="Use the keyboard as an entropy source only if opening the random device fails. ">ISC_ENTROPY_KEYBOARDMAYBE</a>, open the keyboard only if opening the random file/device fails. A message will be printed describing the need for keyboard input.</li>
</ul>
<ul>
<li>If "use_keyboard" is <a class="el" href="entropy_8h.html#a48b8ca8f383520f8d0246d286c0574f6" title="Never use the keyboard as an entropy source. ">ISC_ENTROPY_KEYBOARDNO</a>, the keyboard will never be opened.</li>
</ul>
<p>Returns: </p><ul>
<li>#ISC_R_SUCCESS if at least one source of entropy could be started.</li>
</ul>
<ul>
<li>#ISC_R_NOENTROPY if use_keyboard is <a class="el" href="entropy_8h.html#a48b8ca8f383520f8d0246d286c0574f6" title="Never use the keyboard as an entropy source. ">ISC_ENTROPY_KEYBOARDNO</a> and there is no random device pathname compiled into the program.</li>
</ul>
<ul>
<li>A return code from <a class="el" href="entropy_8h.html#a48df8f5bb233d7afb1dd16775b4d60ed" title="Create a new entropy source from a file. ">isc_entropy_createfilesource()</a> or <a class="el" href="entropy_8h.html#a7a9efa6989c72ad49bfea346cc3cd83d" title="Create an entropy source that is polled via a callback. ">isc_entropy_createcallbacksource()</a>. </li>
</ul>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
