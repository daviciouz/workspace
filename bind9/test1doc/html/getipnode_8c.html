<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MyProject1: /home/stepsei/workspace/bind9/lib/lwres/getipnode.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MyProject1
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">--</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a1b4463e4b2f6ff4aff4dd4221cff45f.html">lwres</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">getipnode.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;config.h&gt;</code><br />
<code>#include &lt;<a class="el" href="stdio_8h_source.html">stdio.h</a>&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;<a class="el" href="lwres_8h_source.html">lwres/lwres.h</a>&gt;</code><br />
<code>#include &lt;lwres/net.h&gt;</code><br />
<code>#include &lt;lwres/netdb.h&gt;</code><br />
<code>#include &quot;<a class="el" href="assert__p_8h_source.html">assert_p.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a001221f197fa18c54d6fc0833afe43ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="getipnode_8c.html#a001221f197fa18c54d6fc0833afe43ce">INADDRSZ</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a001221f197fa18c54d6fc0833afe43ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad67a4ada9fe9e82b4814d0802f194ef9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad67a4ada9fe9e82b4814d0802f194ef9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IN6ADDRSZ</b>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ad67a4ada9fe9e82b4814d0802f194ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a963037c480bef61e300eb4240e0c817f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>IN6_IS_ADDR_V4COMPAT</b>(x)</td></tr>
<tr class="separator:a963037c480bef61e300eb4240e0c817f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a864a7b5c858e27775ffd4c6c237e21"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2a864a7b5c858e27775ffd4c6c237e21"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IN6_IS_ADDR_V4MAPPED</b>(x)&#160;&#160;&#160;(!memcmp((x)-&gt;s6_addr, in6addr_mapped, 12))</td></tr>
<tr class="separator:a2a864a7b5c858e27775ffd4c6c237e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa0b2ea989a6f0e1ad32c24cb5b4c0199"><td class="memItemLeft" align="right" valign="top">struct hostent *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="getipnode_8c.html#aa0b2ea989a6f0e1ad32c24cb5b4c0199">lwres_getipnodebyname</a> (const char *name, int af, int flags, int *error_num)</td></tr>
<tr class="separator:aa0b2ea989a6f0e1ad32c24cb5b4c0199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca6712f473a548eaa7fb8f527149324"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4ca6712f473a548eaa7fb8f527149324"></a>
struct hostent *&#160;</td><td class="memItemRight" valign="bottom"><b>lwres_getipnodebyaddr</b> (const void *src, size_t len, int af, int *error_num)</td></tr>
<tr class="separator:a4ca6712f473a548eaa7fb8f527149324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1c75dad3ce80d9daabc9e4691dd43e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c1c75dad3ce80d9daabc9e4691dd43e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>lwres_freehostent</b> (struct hostent *he)</td></tr>
<tr class="separator:a1c1c75dad3ce80d9daabc9e4691dd43e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a963037c480bef61e300eb4240e0c817f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IN6_IS_ADDR_V4COMPAT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(!memcmp((x)-&gt;s6_addr, in6addr_compat, 12) &amp;&amp; \</div><div class="line">                 ((x)-&gt;s6_addr[12] != 0 || \</div><div class="line">                  (x)-&gt;s6_addr[13] != 0 || \</div><div class="line">                  (x)-&gt;s6_addr[14] != 0 || \</div><div class="line">                   ((x)-&gt;s6_addr[15] != 0 &amp;&amp; \</div><div class="line">                    (x)-&gt;s6_addr[15] != 1)))</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a001221f197fa18c54d6fc0833afe43ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INADDRSZ&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>These functions perform thread safe, protocol independent nodename-to-address and address-to-nodename translation as defined in RFC2553. This use a struct hostent which is defined in namedb.h:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;struct  hostent {</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        char    *h_name;        // official name of host</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        char    **h_aliases;    // alias list</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        int     h_addrtype;     // host address type</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        int     h_length;       // length of address</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        char    **h_addr_list;  // list of addresses from name server</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;};</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;#define h_addr  h_addr_list[0]  // address, for backward compatibility</div></div><!-- fragment --><p>The members of this structure are:</p>
<ul>
<li>h_name: The official (canonical) name of the host.</li>
</ul>
<ul>
<li>h_aliases: A NULL-terminated array of alternate names (nicknames) for the host.</li>
</ul>
<ul>
<li>h_addrtype: The type of address being returned - usually PF_INET or PF_INET6.</li>
</ul>
<ul>
<li>h_length: The length of the address in bytes.</li>
</ul>
<ul>
<li>h_addr_list: A NULL terminated array of network addresses for the host. Host addresses are returned in network byte order.</li>
</ul>
<p><a class="el" href="getipnode_8c.html#aa0b2ea989a6f0e1ad32c24cb5b4c0199">lwres_getipnodebyname()</a> looks up addresses of protocol family af for the hostname name. The flags parameter contains ORed flag bits to specify the types of addresses that are searched for, and the types of addresses that are returned. The flag bits are:</p>
<ul>
<li>#AI_V4MAPPED: This is used with an af of #AF_INET6, and causes IPv4 addresses to be returned as IPv4-mapped IPv6 addresses.</li>
</ul>
<ul>
<li>#AI_ALL: This is used with an af of #AF_INET6, and causes all known addresses (IPv6 and IPv4) to be returned. If #AI_V4MAPPED is also set, the IPv4 addresses are return as mapped IPv6 addresses.</li>
</ul>
<ul>
<li>#AI_ADDRCONFIG: Only return an IPv6 or IPv4 address if here is an active network interface of that type. This is not currently implemented in the BIND 9 lightweight resolver, and the flag is ignored.</li>
</ul>
<ul>
<li>#AI_DEFAULT: This default sets the #AI_V4MAPPED and #AI_ADDRCONFIG flag bits.</li>
</ul>
<p>lwres_getipnodebyaddr() performs a reverse lookup of address src which is len bytes long. af denotes the protocol family, typically PF_INET or PF_INET6.</p>
<p>lwres_freehostent() releases all the memory associated with the struct hostent pointer. Any memory allocated for the h_name, h_addr_list and h_aliases is freed, as is the memory for the hostent structure itself.</p>
<h1><a class="anchor" id="getipnode_return"></a>
Return Values</h1>
<p>If an error occurs, <a class="el" href="getipnode_8c.html#aa0b2ea989a6f0e1ad32c24cb5b4c0199">lwres_getipnodebyname()</a> and lwres_getipnodebyaddr() set *error_num to an appropriate error code and the function returns a NULL pointer. The error codes and their meanings are defined in <a class="el" href="">&lt;lwres/netdb.h&gt;</a>:</p>
<ul>
<li>#HOST_NOT_FOUND: No such host is known.</li>
</ul>
<ul>
<li>#NO_ADDRESS: The server recognised the request and the name but no address is available. Another type of request to the name server for the domain might return an answer.</li>
</ul>
<ul>
<li>#TRY_AGAIN: A temporary and possibly transient error occurred, such as a failure of a server to respond. The request may succeed if retried.</li>
</ul>
<ul>
<li>#NO_RECOVERY: An unexpected failure occurred, and retrying the request is pointless.</li>
</ul>
<p><a class="el" href="herror_8c.html#a5f8b639cb113b671ecb90ff1a06cee7d">lwres_hstrerror()</a> translates these error codes to suitable error messages.</p>
<h1><a class="anchor" id="getipnode_see"></a>
See Also</h1>
<p>getaddrinfo.c, <a class="el" href="gethost_8c.html">gethost.c</a>, getnameinfo.c, <a class="el" href="herror_8c.html">herror.c</a>, RFC2553 </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa0b2ea989a6f0e1ad32c24cb5b4c0199"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct hostent* lwres_getipnodebyname </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>af</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>error_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>AI_V4MAPPED + AF_INET6 If no IPv6 address then a query for IPv4 and map returned values.</p>
<p>AI_ALL + AI_V4MAPPED + AF_INET6 Return IPv6 and IPv4 mapped.</p>
<p>AI_ADDRCONFIG Only return IPv6 / IPv4 address if there is an interface of that type active. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
