<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MyProject1: systembuf Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MyProject1
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">--</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>atf</b></li><li class="navelem"><b>atf_run</b></li><li class="navelem"><a class="el" href="classatf_1_1atf__run_1_1systembuf.html">systembuf</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">systembuf Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>std::streambuf implementation for system file handles.  
 <a href="classatf_1_1atf__run_1_1systembuf.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="io_8hpp_source.html">io.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for systembuf:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classatf_1_1atf__run_1_1systembuf.png" usemap="#systembuf_map" alt=""/>
  <map id="systembuf_map" name="systembuf_map">
<area href="classatf_1_1noncopyable.html" alt="noncopyable" shape="rect" coords="95,0,180,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ac38bfa59195d0a24d92fb861365f311a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac38bfa59195d0a24d92fb861365f311a"></a>
typedef int&#160;</td><td class="memItemRight" valign="bottom"><b>handle_type</b></td></tr>
<tr class="separator:ac38bfa59195d0a24d92fb861365f311a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8c9248da29791334ea65c088ad3401e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classatf_1_1atf__run_1_1systembuf.html#a8c9248da29791334ea65c088ad3401e7">systembuf</a> (handle_type h, std::size_t bufsize=8192)</td></tr>
<tr class="memdesc:a8c9248da29791334ea65c088ad3401e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new systembuf for the given file handle.  <a href="#a8c9248da29791334ea65c088ad3401e7">More...</a><br /></td></tr>
<tr class="separator:a8c9248da29791334ea65c088ad3401e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ae566ca4fbb89fceec3fb6ff228843cd9"><td class="memItemLeft" align="right" valign="top">virtual int_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classatf_1_1atf__run_1_1systembuf.html#ae566ca4fbb89fceec3fb6ff228843cd9">underflow</a> (void)</td></tr>
<tr class="memdesc:ae566ca4fbb89fceec3fb6ff228843cd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads new data from the native file handle.  <a href="#ae566ca4fbb89fceec3fb6ff228843cd9">More...</a><br /></td></tr>
<tr class="separator:ae566ca4fbb89fceec3fb6ff228843cd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65f7442185b3128753402233ef3adee7"><td class="memItemLeft" align="right" valign="top">virtual int_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classatf_1_1atf__run_1_1systembuf.html#a65f7442185b3128753402233ef3adee7">overflow</a> (int c)</td></tr>
<tr class="memdesc:a65f7442185b3128753402233ef3adee7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes room in the write buffer for additional data.  <a href="#a65f7442185b3128753402233ef3adee7">More...</a><br /></td></tr>
<tr class="separator:a65f7442185b3128753402233ef3adee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5995ca88c88de0157244e5f47dd4780"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classatf_1_1atf__run_1_1systembuf.html#ac5995ca88c88de0157244e5f47dd4780">sync</a> (void)</td></tr>
<tr class="memdesc:ac5995ca88c88de0157244e5f47dd4780"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flushes the output buffer to disk.  <a href="#ac5995ca88c88de0157244e5f47dd4780">More...</a><br /></td></tr>
<tr class="separator:ac5995ca88c88de0157244e5f47dd4780"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>std::streambuf implementation for system file handles. </p>
<p>systembuf provides a std::streambuf implementation for system file handles. Contrarywise to <a class="el" href="classatf_1_1atf__run_1_1file__handle.html" title="Simple RAII model for system file handles. ">file_handle</a>, this class does <b>not</b> take ownership of the native file handle; this should be taken care of somewhere else.</p>
<p>This class follows the expected semantics of a std::streambuf object. However, it is not copyable to avoid introducing inconsistences with the on-disk file and the in-memory buffers. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8c9248da29791334ea65c088ad3401e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classatf_1_1atf__run_1_1systembuf.html">systembuf</a> </td>
          <td>(</td>
          <td class="paramtype">handle_type&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>bufsize</em> = <code>8192</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a new systembuf for the given file handle. </p>
<p>This constructor creates a new systembuf object that reads or writes data from/to the <em>h</em> native file handle. This handle is <b>not</b> owned by the created systembuf object; the code should take care of it externally.</p>
<p>This class buffers input and output; the buffer size may be tuned through the <em>bufsize</em> parameter, which defaults to 8192 bytes.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classatf_1_1atf__run_1_1pistream.html" title="Child process&#39; output stream. ">pistream</a>. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a65f7442185b3128753402233ef3adee7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">impl::systembuf::int_type overflow </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes room in the write buffer for additional data. </p>
<p>This operation is called by output methods when there is no more space in the output buffer to hold a new element. The function first flushes the buffer's contents to disk and then clears it to leave room for more characters. The given <em>c</em> character is stored at the beginning of the new space.</p>
<dl class="section pre"><dt>Precondition</dt><dd>All output positions are exhausted (pptr() &gt;= epptr()). </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The output buffer has more space if no errors occurred during the write to disk. </dd>
<dd>
*(pptr() - 1) is <em>c</em>. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>traits_type::eof() if a write error occurrs. Otherwise returns traits_type::not_eof(c). </dd></dl>

</div>
</div>
<a class="anchor" id="ac5995ca88c88de0157244e5f47dd4780"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int sync </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flushes the output buffer to disk. </p>
<p>Synchronizes the systembuf buffers with the contents of the file associated to this object through the native file handle. The output buffer is flushed to disk and cleared to leave new room for more data.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 if an error occurred. </dd></dl>

</div>
</div>
<a class="anchor" id="ae566ca4fbb89fceec3fb6ff228843cd9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">impl::systembuf::int_type underflow </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads new data from the native file handle. </p>
<p>This operation is called by input methods when there are no more data in the input buffer. The function fills the buffer with new data, if available.</p>
<dl class="section pre"><dt>Precondition</dt><dd>All input positions are exhausted (gptr() &gt;= egptr()). </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The input buffer has new data, if available. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>traits_type::eof() if a read error occurrs or there are no more data to be read. Otherwise returns traits_type::to_int_type(*gptr()). </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/stepsei/workspace/bind9/unit/atf-src/atf-run/<a class="el" href="io_8hpp_source.html">io.hpp</a></li>
<li>/home/stepsei/workspace/bind9/unit/atf-src/atf-run/io.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
